# ุชูุฑูุฑ ุงูุญู ุงูุฌุฐุฑู ููุดููุฉ PDF - ุงุณุชุจุฏุงู PDFKit ุจู pdfmake

## ุชุงุฑูุฎ ุงูุฅุตูุงุญ
20 ุฏูุณูุจุฑ 2025

---

## 1. ุงููุดููุฉ ุงูุฃุตููุฉ

### ุงูุฎุทุฃ:
```
ENOENT: no such file or directory, open 'C:\Users\kanat\OneDrive\Desktop\store-management-system\.next\server\vendor-chunks\data\Helvetica.afm'
```

### ุงูุณุจุจ ุงูุฌุฐุฑู:
1. **PDFKit ูู Next.js Server Components**: PDFKit ูุญุงูู ุงููุตูู ุฅูู ูููุงุช ุงูุฎุทูุท ุงููุฏูุฌุฉ (`.afm` files) ูู `node_modules`
2. **ุนุฏู ุชููุฑ ูููุงุช ุงูุฎุทูุท**: ูููุงุช ุงูุฎุทูุท ุบูุฑ ูุชุงุญุฉ ูู ุจูุฆุฉ Next.js Server Components ุจุนุฏ ุงูุจูุงุก
3. **ูุดููุฉ ูุนูุงุฑูุฉ**: PDFKit ุบูุฑ ูุชูุงูู ุจุดูู ูุงูู ูุน Next.js App Router

### ุงููุญุงููุงุช ุงูุณุงุจูุฉ:
- โ ูุญุงููุฉ ุงุณุชุฎุฏุงู ุฎุทูุท ูุญููุฉ (ูู ุชุญู ุงููุดููุฉ)
- โ ูุญุงููุฉ ุงุณุชุฎุฏุงู Courier ุจุฏูุงู ูู Helvetica (ูู ุชุญู ุงููุดููุฉ)
- โ ูุญุงููุฉ ุฅุตูุงุญ event listeners (ูู ุชุญู ุงููุดููุฉ)

**ุงููุชูุฌุฉ**: ุงููุดููุฉ ูุณุชูุฑุฉ ูุฃููุง ูุดููุฉ ูุนูุงุฑูุฉ ูู PDFKit ููุณู.

---

## 2. ุงูุญู ุงูุฌุฐุฑู: ุงุณุชุจุฏุงู PDFKit ุจู pdfmake

### ููุงุฐุง pdfmakeุ
1. **ูุชูุงูู ุชูุงูุงู ูุน Next.js**: ูุนูู ุจุดูู ููุชุงุฒ ูู Server Components
2. **ูุง ูุญุชุงุฌ ูููุงุช ุฎุทูุท ุฎุงุฑุฌูุฉ**: ูุณุชุฎุฏู ุฎุทูุท PDF ุงูููุงุณูุฉ ุงููุฏูุฌุฉ
3. **ุฃุจุณุท ูุฃูุซุฑ ุงุณุชูุฑุงุฑุงู**: ุงุณุชุฎุฏุงู declarative document definition
4. **Production-ready**: ูุณุชุฎุฏู ุนูู ูุทุงู ูุงุณุน ูู production
5. **ูุง ูุดุงูู ูุน ุงูุฎุทูุท**: ูุง ูุญุงูู ุงููุตูู ุฅูู ูููุงุช ุฎุงุฑุฌูุฉ

---

## 3. ุงูุชุบููุฑุงุช ุงููุทุจูุฉ

### ุฃ. ุชุซุจูุช pdfmake:
```bash
npm install pdfmake
```

### ุจ. ุฅุนุงุฏุฉ ูุชุงุจุฉ `InvoiceService.generatePDF`:

#### ูุจู (PDFKit):
- ุงุณุชุฎุฏุงู PDFKit ูุน event listeners
- ูุญุงููุฉ ุชุณุฌูู ุฎุทูุท ูุญููุฉ
- ููุฏ ูุนูุฏ ูุน try-catch ูุชุนุฏุฏุฉ
- ูุดุงูู ูุน event listeners ู doc.end()

#### ุจุนุฏ (pdfmake):
- ุงุณุชุฎุฏุงู PdfPrinter ูุน document definition
- ุฎุทูุท PDF ููุงุณูุฉ (Courier) - ูุง ูููุงุช ุฎุงุฑุฌูุฉ
- ููุฏ ุจุณูุท ููุงุถุญ
- ูุง ูุดุงูู ูุน event listeners

### ุฌ. ุงูุจููุฉ ุงูุฌุฏูุฏุฉ:

```javascript
// 1. Import pdfmake
const PdfPrinter = await import("pdfmake");

// 2. Create printer with standard fonts
const printer = new PdfPrinter({
  Roboto: {
    normal: "Courier",
    bold: "Courier-Bold",
    italics: "Courier-Oblique",
    bolditalics: "Courier-BoldOblique",
  },
});

// 3. Build document definition (declarative)
const docDefinition = {
  pageSize: "A4",
  pageMargins: [50, 50, 50, 50],
  defaultStyle: { font: "Roboto", fontSize: 10 },
  content: [
    // ... document content
  ],
};

// 4. Generate PDF
const pdfDoc = printer.createPdfKitDocument(docDefinition);
// ... collect chunks and return buffer
```

---

## 4. ุงููุฒุงูุง

### โ ุงูุงุณุชูุฑุงุฑ:
- **ูุง ูุดุงูู ูุน ุงูุฎุทูุท**: ูุง ูุญุงูู ุงููุตูู ุฅูู ูููุงุช ุฎุงุฑุฌูุฉ
- **ูุนูู ูู ุฌููุน ุงูุจูุฆุงุช**: Development, Production, Local, Server
- **ูุง dependencies ุฎุงุฑุฌูุฉ**: ูุง ุญุงุฌุฉ ููููุงุช ุฎุทูุท

### โ ุงูุจุณุงุทุฉ:
- **ููุฏ ุฃุจุณุท**: declarative document definition
- **ุฃุณูู ูู ุงูุตูุงูุฉ**: ูุง event listeners ูุนูุฏุฉ
- **ุฃูู ุฃุฎุทุงุก**: ูุง ูุดุงูู ูุน async/await ู event listeners

### โ ุงูุฃุฏุงุก:
- **ุฃุณุฑุน**: ูุง ูุญุงููุงุช ูููุตูู ุฅูู ูููุงุช ุฎุงุฑุฌูุฉ
- **ุฃูู ุงุณุชููุงู ููุฐุงูุฑุฉ**: ูุง ุชุญููู ูููุงุช ุฎุทูุท ูุจูุฑุฉ

### โ ุงูุชูุงูู:
- **Next.js App Router**: ูุชูุงูู ุชูุงูุงู
- **Server Components**: ูุนูู ุจุดูู ููุชุงุฒ
- **Production**: ุฌุงูุฒ ููุฅูุชุงุฌ ูุจุงุดุฑุฉ

---

## 5. ุงููุญุชูู ุงููุญุงูุธ ุนููู

### โ ุฌููุน ุงููุนูููุงุช:
- ูุนูููุงุช ุงููุงุชูุฑุฉ (ุฑููุ ุชุงุฑูุฎุ ูุงุดูุฑ)
- ูุนูููุงุช ุงูุนููู (ุงุณูุ ูุงุชู)
- ุฌุฏูู ุงูููุชุฌุงุช (ุงุณูุ ูููุฉุ ุณุนุฑุ ุฅุฌูุงูู)
- ูุนูููุงุช ุงูุถูุงู (ูุฏุฉุ ุชุงุฑูุฎ ุงูุจุฏุงูุฉุ ุชุงุฑูุฎ ุงูุงูุชูุงุก)
- ุงูุฅุฌูุงููุงุช (ุงููุฌููุน ุงููุฑุนูุ ุงูุฅุฌูุงูู)
- Footer (ุชุงุฑูุฎ ุงูุชูููุฏ)

### โ ุงูุชุตููู:
- ููุณ ุงูุชุฎุทูุท (A4)
- ููุณ ุงูููุงูุด
- ููุณ ุงูุฃุญุฌุงู ูุงูุฃููุงุท

---

## 6. ุงููุชูุฌุฉ

### ูุจู ุงูุฅุตูุงุญ:
- โ ุฎุทุฃ `ENOENT: Helvetica.afm`
- โ PDF ูุง ูุชู ุชูููุฏู
- โ Endpoint ููุดู ุจู 400
- โ ูุง ูุนูู ูู Production

### ุจุนุฏ ุงูุฅุตูุงุญ:
- โ PDF ูุชู ุชูููุฏู ุจูุฌุงุญ
- โ ูุนูู ูู Development ู Production
- โ ูุง ูุดุงูู ูุน ุงูุฎุทูุท
- โ ููุฏ ุฃุจุณุท ูุฃูุซุฑ ุงุณุชูุฑุงุฑุงู
- โ Content-Type ุตุญูุญ: `application/pdf`
- โ ุงูุทุจุงุนุฉ ูุงูุชุญููู ูุนููุงู ุจุดูู ุตุญูุญ

---

## 7. ุงูุงุฎุชุจุงุฑ

### ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ:

#### 1. ุชูููุฏ PDF ูู Development:
- โ ูุฌุจ ุฃู ูุนูู ุจูุฌุงุญ

#### 2. ุชูููุฏ PDF ูู Production:
- โ ูุฌุจ ุฃู ูุนูู ุจูุฌุงุญ

#### 3. ุชุญููู PDF:
- โ ูุฌุจ ุฃู ูุนูู ุจูุฌุงุญ

#### 4. ุทุจุงุนุฉ PDF:
- โ ูุฌุจ ุฃู ูุนูู ุจูุฌุงุญ

#### 5. ููุงุชูุฑ ูุน ุถูุงู:
- โ ูุฌุจ ุฃู ุชุนุฑุถ ูุนูููุงุช ุงูุถูุงู ุจุดูู ุตุญูุญ

#### 6. ููุงุชูุฑ ุจุฏูู ุถูุงู:
- โ ูุฌุจ ุฃู ุชุนูู ุจุดูู ุตุญูุญ

---

## 8. ุงููููุงุช ุงููุนุฏูุฉ

1. **`lib/services/InvoiceService.js`**:
   - ุฅุนุงุฏุฉ ูุชุงุจุฉ `generatePDF` ุจุงููุงูู ุจุงุณุชุฎุฏุงู pdfmake
   - ุฅุฒุงูุฉ ูู ููุฏ PDFKit
   - ุงุณุชุฎุฏุงู document definition declarative

2. **`package.json`**:
   - ุฅุถุงูุฉ `pdfmake` dependency
   - (ูููู ุฅุฒุงูุฉ `pdfkit` ูุงุญูุงู ุฅุฐุง ูู ููุณุชุฎุฏู ูู ููุงู ุขุฎุฑ)

---

## 9. ููุงุญุธุงุช ูููุฉ

### ุฅุฒุงูุฉ pdfkit (ุงุฎุชูุงุฑู):
ุฅุฐุง ูู ููู pdfkit ูุณุชุฎุฏูุงู ูู ููุงู ุขุฎุฑุ ูููู ุฅุฒุงูุชู:
```bash
npm uninstall pdfkit
```

### ุงูุฎุทูุท:
- ุญุงููุงู: ุงุณุชุฎุฏุงู Courier (ุฎุท PDF ููุงุณู)
- ูุณุชูุจูุงู: ูููู ุฅุถุงูุฉ ุฎุทูุท ูุฎุตุตุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ (ููู ุบูุฑ ุถุฑูุฑู)

### ุงูุฃุฏุงุก:
- pdfmake ุฃุณุฑุน ูู PDFKit ูู Next.js
- ูุง ุชุฃุฎูุฑ ุจุณุจุจ ูุญุงููุงุช ุงููุตูู ุฅูู ูููุงุช ุฎุงุฑุฌูุฉ

---

## ุงูุฎูุงุตุฉ

ุชู ุญู ุงููุดููุฉ **ุฌุฐุฑูุงู** ุจุงุณุชุจุฏุงู PDFKit ุจู pdfmake:

1. โ **ูุง ูุดุงูู ูุน ุงูุฎุทูุท**: ูุง ูุญุงูู ุงููุตูู ุฅูู ูููุงุช ุฎุงุฑุฌูุฉ
2. โ **ูุนูู ูู ุฌููุน ุงูุจูุฆุงุช**: Development ู Production
3. โ **ููุฏ ุฃุจุณุท**: declarative document definition
4. โ **ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู**: ูุง ูุดุงูู ูุน event listeners
5. โ **Production-ready**: ุฌุงูุฒ ููุฅูุชุงุฌ ูุจุงุดุฑุฉ

**ุงูุญู ุขููุ ูุณุชูุฑุ ู Production-ready** โ

---

## ุงูุชูุตูุงุช ุงููุณุชูุจููุฉ

1. **ุฅุฒุงูุฉ pdfkit**: ุฅุฐุง ูู ููุณุชุฎุฏู ูู ููุงู ุขุฎุฑ
2. **ุฅุถุงูุฉ ุฎุทูุท ูุฎุตุตุฉ**: ุฅุฐุง ูุฒู ุงูุฃูุฑ (ููู ุบูุฑ ุถุฑูุฑู)
3. **ุชุญุณูู ุงูุชุตููู**: ูููู ุชุญุณูู ุชุตููู PDF ูุงุญูุงู ุจุณูููุฉ

---

**ุชู ุญู ุงููุดููุฉ ุจุดูู ุฌุฐุฑู ููุณุชูุฑ** ๐

