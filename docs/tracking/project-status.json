{
  "projectInfo": {
    "name": "Store Management System",
    "description": "Inventory Management System for Home Appliances Store",
    "version": "2.0",
    "status": "in_progress",
    "startDate": "2025-01-11T00:00:00Z",
    "targetEndDate": null,
    "lastUpdated": "2025-01-12T17:15:00Z",
    "language": {
      "ui": "French",
      "technical": "English"
    }
  },
  "phases": [
    {
      "id": "phase-1",
      "name": "Project Setup",
      "description": "Initial project configuration, dependencies, and folder structure",
      "status": "completed",
      "progress": 100,
      "startDate": "2025-01-11T00:00:00Z",
      "endDate": "2025-01-11T23:59:59Z",
      "why": "Establish a solid foundation with proper tooling and structure before building any features. This ensures code quality, maintainability, and developer experience.",
      "how": "Set up Next.js project, configure ESLint/Prettier for code quality, install styled-components for UI, establish MongoDB connection, and create organized folder structure following best practices.",
      "tasks": [
        {
          "id": "1.1",
          "name": "Create Next.js Project",
          "description": "Initialize Next.js project with JavaScript (not TypeScript)",
          "status": "completed",
          "completedAt": "2025-01-11T12:00:00Z",
          "notes": "Next.js 14.2.0 initialized with App Router. All basic files created.",
          "dependencies": []
        },
        {
          "id": "1.2",
          "name": "Configure JavaScript",
          "description": "Ensure JavaScript is enabled, no TypeScript in MVP phase",
          "status": "completed",
          "completedAt": "2025-01-11T12:00:00Z",
          "notes": "Project configured for JavaScript (ES6+). No TypeScript dependencies.",
          "dependencies": ["1.1"]
        },
        {
          "id": "1.3",
          "name": "Setup ESLint + Prettier",
          "description": "Install and configure ESLint and Prettier for code quality",
          "status": "completed",
          "completedAt": "2025-01-11T14:00:00Z",
          "notes": "ESLint 9.39.1 and Prettier 3.7.4 configured. All linting rules working.",
          "dependencies": ["1.1"]
        },
        {
          "id": "1.4",
          "name": "Setup Styled-Components",
          "description": "Install styled-components and configure theme",
          "status": "completed",
          "completedAt": "2025-01-11T15:00:00Z",
          "notes": "Styled-components 6.1.19 installed. Theme and GlobalStyles created.",
          "dependencies": ["1.1"]
        },
        {
          "id": "1.5",
          "name": "Install Mongoose",
          "description": "Install Mongoose ODM for MongoDB",
          "status": "completed",
          "completedAt": "2025-01-11T15:30:00Z",
          "notes": "Mongoose 9.0.1 installed successfully.",
          "dependencies": ["1.1"]
        },
        {
          "id": "1.6",
          "name": "Setup MongoDB Atlas Connection",
          "description": "Create connection function with error handling",
          "status": "completed",
          "completedAt": "2025-01-11T16:00:00Z",
          "notes": "Connection helper created with singleton pattern. .env.example added.",
          "dependencies": ["1.5"]
        },
        {
          "id": "1.7",
          "name": "Create Folder Structure",
          "description": "Create all required directories (models, services, validators, auth, api, etc.)",
          "status": "completed",
          "completedAt": "2025-01-11T16:30:00Z",
          "notes": "All folders created. Placeholder files added for Product model and ProductService.",
          "dependencies": ["1.1"]
        }
      ]
    },
    {
      "id": "phase-2",
      "name": "Database Models",
      "description": "Create all Mongoose models with schemas, indexes, and validation",
      "status": "completed",
      "progress": 100,
      "startDate": "2025-01-11T17:00:00Z",
      "endDate": "2025-01-11T23:00:00Z",
      "why": "Data models are the foundation of the application. They define the structure, relationships, and business rules for all data. Building them first ensures we understand the domain before implementing business logic.",
      "how": "Create Mongoose schemas for Product, Category, SubCategory, Brand, Supplier, Sale, InventoryLog, and User. Add indexes for performance, virtuals for computed properties, and hooks for data integrity.",
      "tasks": [
        {
          "id": "2.1",
          "name": "Product Model",
          "description": "Create Product schema with all fields, indexes, and virtuals",
          "status": "completed",
          "completedAt": "2025-01-11T18:00:00Z",
          "notes": "Product model created with all fields, indexes (text, compound), virtuals (isLowStock), and deletion hook. Uses ES6 modules and hot reload protection.",
          "dependencies": ["1.7"]
        },
        {
          "id": "2.2",
          "name": "Category Model",
          "description": "Create Category schema with unique index and virtuals",
          "status": "completed",
          "completedAt": "2025-01-11T18:15:00Z",
          "notes": "Category model created with unique name index, virtual for subcategories, and deletion hook.",
          "dependencies": ["1.7"]
        },
        {
          "id": "2.3",
          "name": "SubCategory Model",
          "description": "Create SubCategory schema with category reference",
          "status": "completed",
          "completedAt": "2025-01-11T18:30:00Z",
          "notes": "SubCategory model created with compound unique index (category + name), virtual for products, and deletion hook.",
          "dependencies": ["2.2"]
        },
        {
          "id": "2.4",
          "name": "Brand Model",
          "description": "Create Brand schema with unique index",
          "status": "completed",
          "completedAt": "2025-01-11T18:45:00Z",
          "notes": "Brand model created with unique name index, virtual for products, and deletion hook.",
          "dependencies": ["1.7"]
        },
        {
          "id": "2.5",
          "name": "Supplier Model",
          "description": "Create Supplier schema with phone validation",
          "status": "completed",
          "completedAt": "2025-01-11T19:00:00Z",
          "notes": "Supplier model created with phone regex validation, virtual for products, and deletion hook.",
          "dependencies": ["1.7"]
        },
        {
          "id": "2.6",
          "name": "Sale Model",
          "description": "Create Sale schema with product, quantity, price references",
          "status": "completed",
          "completedAt": "2025-01-11T19:15:00Z",
          "notes": "Sale model created with compound indexes (product + createdAt, cashier + createdAt), virtual totalAmount, and timestamps.",
          "dependencies": ["2.1"]
        },
        {
          "id": "2.7",
          "name": "InventoryLog Model",
          "description": "Create InventoryLog schema with product, quantity, price, manager references",
          "status": "completed",
          "completedAt": "2025-01-11T19:30:00Z",
          "notes": "InventoryLog model created with indexes (product + createdAt, manager + createdAt) for audit trail.",
          "dependencies": ["2.1"]
        },
        {
          "id": "2.8",
          "name": "User Model",
          "description": "Create User schema with email, passwordHash, role, and password hashing",
          "status": "completed",
          "completedAt": "2025-01-11T19:45:00Z",
          "notes": "User model created with bcrypt password hashing, pre-save hook, comparePassword method, unique email index, and role index.",
          "dependencies": ["1.7"]
        }
      ]
    },
    {
      "id": "phase-3",
      "name": "Service Layer",
      "description": "Implement all business logic in service layer (ProductService, SaleService, InventoryService, etc.)",
      "status": "completed",
      "progress": 100,
      "startDate": "2025-01-11T23:00:00Z",
      "endDate": "2025-01-12T02:00:00Z",
      "why": "Service layer encapsulates all business logic, making it reusable, testable, and independent of API routes. This separation allows us to change API structure without affecting business rules.",
      "how": "Create service classes for each domain (Product, Sale, Inventory, Category, Brand, Supplier, Auth). Each service handles validation, database operations, transactions, and business rules. Services are called by API routes, not the other way around.",
      "tasks": [
        {
          "id": "3.1",
          "name": "ProductService.createProduct",
          "description": "Create product with validation and populated references",
          "status": "completed",
          "completedAt": "2025-01-12T00:00:00Z",
          "notes": "Implemented with full reference validation, error handling, and populated responses.",
          "dependencies": ["2.1", "2.4", "2.3", "2.5"]
        },
        {
          "id": "3.2",
          "name": "ProductService.updateProduct",
          "description": "Update product with validation",
          "status": "completed",
          "completedAt": "2025-01-12T00:15:00Z",
          "notes": "Supports partial updates with reference validation and specs merging.",
          "dependencies": ["3.1"]
        },
        {
          "id": "3.3",
          "name": "ProductService.adjustStock",
          "description": "Atomic stock update using MongoDB operations",
          "status": "completed",
          "completedAt": "2025-01-12T00:30:00Z",
          "notes": "Atomic stock adjustment with negative stock prevention. Used by SaleService and InventoryService.",
          "dependencies": ["2.1"]
        },
        {
          "id": "3.4",
          "name": "ProductService.getProducts",
          "description": "Get products with filters, sorting, and pagination",
          "status": "completed",
          "completedAt": "2025-01-12T00:45:00Z",
          "notes": "Comprehensive filtering (brand, subCategory, stockLevel, price range), sorting, and pagination support.",
          "dependencies": ["2.1"]
        },
        {
          "id": "3.5",
          "name": "ProductService.getProductById",
          "description": "Get single product by ID with populated references",
          "status": "completed",
          "completedAt": "2025-01-12T01:00:00Z",
          "notes": "Returns product with all relationships populated (brand, subCategory with category, supplier).",
          "dependencies": ["2.1"]
        },
        {
          "id": "3.6",
          "name": "ProductService.searchProducts",
          "description": "Text search on name, model, color, capacity",
          "status": "completed",
          "completedAt": "2025-01-12T01:15:00Z",
          "notes": "Text search using MongoDB text index with relevance sorting support.",
          "dependencies": ["3.4"]
        },
        {
          "id": "3.7",
          "name": "ProductService.getLowStockProducts",
          "description": "Find products where stock <= lowStockThreshold",
          "status": "completed",
          "completedAt": "2025-01-12T01:30:00Z",
          "notes": "Uses MongoDB aggregation to find low stock products efficiently.",
          "dependencies": ["2.1"]
        },
        {
          "id": "3.8",
          "name": "ProductService.deleteProduct",
          "description": "Delete product with sales history check",
          "status": "completed",
          "completedAt": "2025-01-12T01:45:00Z",
          "notes": "Validates sales history before deletion. Uses model hook for additional protection.",
          "dependencies": ["2.1", "2.6"]
        },
        {
          "id": "3.9",
          "name": "SaleService.registerSale",
          "description": "Register sale with transaction, stock update, and low stock check",
          "status": "completed",
          "completedAt": "2025-01-12T02:00:00Z",
          "notes": "MongoDB transaction ensures atomicity. Validates stock, creates sale, updates stock, checks low stock threshold.",
          "dependencies": ["2.6", "3.3"]
        },
        {
          "id": "3.10",
          "name": "SaleService.getSales",
          "description": "Get sales with filters, sorting, and pagination",
          "status": "completed",
          "completedAt": "2025-01-12T02:15:00Z",
          "notes": "Supports filtering by product, cashier, date range with sorting and pagination.",
          "dependencies": ["2.6"]
        },
        {
          "id": "3.11",
          "name": "SaleService.getCashierSales",
          "description": "Get sales by cashier ID",
          "status": "completed",
          "completedAt": "2025-01-12T02:30:00Z",
          "notes": "Returns recent sales for a specific cashier with limit capping at 50.",
          "dependencies": ["2.6"]
        },
        {
          "id": "3.12",
          "name": "InventoryService.addInventoryEntry",
          "description": "Add inventory entry with transaction and stock update",
          "status": "completed",
          "completedAt": "2025-01-12T02:45:00Z",
          "notes": "MongoDB transaction ensures atomicity. Validates manager role, creates log, updates stock and price.",
          "dependencies": ["2.7", "3.3"]
        },
        {
          "id": "3.13",
          "name": "InventoryService.getInventoryHistory",
          "description": "Get inventory history with filters and pagination",
          "status": "completed",
          "completedAt": "2025-01-12T03:00:00Z",
          "notes": "Supports filtering by product, manager, date range with sorting and pagination.",
          "dependencies": ["2.7"]
        },
        {
          "id": "3.14",
          "name": "CategoryService CRUD",
          "description": "Create, Read, Update, Delete operations for categories",
          "status": "completed",
          "completedAt": "2025-01-12T03:15:00Z",
          "notes": "Full CRUD operations with duplicate prevention and deletion protection (checks for subcategories).",
          "dependencies": ["2.2"]
        },
        {
          "id": "3.15",
          "name": "SubCategoryService CRUD",
          "description": "Create, Read, Update, Delete operations for subcategories",
          "status": "completed",
          "completedAt": "2025-01-12T03:30:00Z",
          "notes": "Full CRUD operations with category validation, compound unique index support, and deletion protection.",
          "dependencies": ["2.3"]
        },
        {
          "id": "3.16",
          "name": "BrandService CRUD",
          "description": "Create, Read, Update, Delete operations for brands",
          "status": "completed",
          "completedAt": "2025-01-12T03:45:00Z",
          "notes": "Full CRUD operations with duplicate prevention and deletion protection (checks for products).",
          "dependencies": ["2.4"]
        },
        {
          "id": "3.17",
          "name": "SupplierService CRUD",
          "description": "Create, Read, Update, Delete operations for suppliers",
          "status": "completed",
          "completedAt": "2025-01-12T04:00:00Z",
          "notes": "Full CRUD operations with optional fields support and deletion protection (checks for products).",
          "dependencies": ["2.5"]
        },
        {
          "id": "3.18",
          "name": "AuthService.login",
          "description": "Login with JWT token and HTTP-only cookie",
          "status": "completed",
          "completedAt": "2025-01-12T04:15:00Z",
          "notes": "JWT token generation with user data. Password verification using bcrypt. Returns user data without passwordHash.",
          "dependencies": ["2.8"]
        },
        {
          "id": "3.19",
          "name": "AuthService.verifyPassword",
          "description": "Verify password using comparePassword method",
          "status": "completed",
          "completedAt": "2025-01-12T04:30:00Z",
          "notes": "Password verification helper method with proper passwordHash handling.",
          "dependencies": ["2.8"]
        },
        {
          "id": "3.20",
          "name": "AuthService.getUserFromSession",
          "description": "Get user from JWT token",
          "status": "completed",
          "completedAt": "2025-01-12T04:45:00Z",
          "notes": "JWT token verification with expiration handling. Returns user data without passwordHash.",
          "dependencies": ["2.8"]
        },
        {
          "id": "3.21",
          "name": "AuthService.logout",
          "description": "Clear session cookie",
          "status": "completed",
          "completedAt": "2025-01-12T05:00:00Z",
          "notes": "Logout method for consistency. In stateless JWT system, logout is handled client-side.",
          "dependencies": ["3.18"]
        }
      ]
    },
    {
      "id": "phase-4",
      "name": "Validation Layer",
      "description": "Create Zod validation schemas for all API inputs",
      "status": "completed",
      "progress": 100,
      "startDate": "2025-01-12T00:00:00Z",
      "endDate": "2025-01-12T23:59:59Z",
      "why": "Input validation is critical for security and data integrity. Zod schemas provide type-safe validation that catches errors before they reach the service layer, improving error messages and preventing invalid data.",
      "how": "Create Zod schemas for each API endpoint input (CreateProductSchema, UpdateProductSchema, SaleSchema, InventoryInSchema, etc.). Create error formatting utility to map Zod errors to standardized French error messages for UI.",
      "tasks": [
        {
          "id": "4.1",
          "name": "CreateProductSchema",
          "description": "Zod schema for product creation with all required and optional fields",
          "status": "completed",
          "completedAt": "2025-01-12T12:00:00Z",
          "notes": "Created product.validation.js with CreateProductSchema and UpdateProductSchema. Includes ObjectId validation, specs object support, and French error messages.",
          "dependencies": ["phase-3"]
        },
        {
          "id": "4.2",
          "name": "UpdateProductSchema",
          "description": "Zod schema for product update (all fields optional)",
          "status": "completed",
          "completedAt": "2025-01-12T12:00:00Z",
          "notes": "UpdateProductSchema allows partial updates with all fields optional. Specs object supports partial merging.",
          "dependencies": ["4.1"]
        },
        {
          "id": "4.3",
          "name": "SaleSchema",
          "description": "Zod schema for sale registration",
          "status": "completed",
          "completedAt": "2025-01-12T12:15:00Z",
          "notes": "Created sale.validation.js with SaleSchema. Validates productId, quantity (integer >= 1), sellingPrice (> 0), and cashierId.",
          "dependencies": ["phase-3"]
        },
        {
          "id": "4.4",
          "name": "InventoryInSchema",
          "description": "Zod schema for inventory entry",
          "status": "completed",
          "completedAt": "2025-01-12T12:30:00Z",
          "notes": "Created inventory.validation.js with InventoryEntrySchema. Validates productId, quantityAdded (integer >= 1), purchasePrice (> 0), managerId, and optional note.",
          "dependencies": ["phase-3"]
        },
        {
          "id": "4.5",
          "name": "CategorySchema",
          "description": "Zod schema for category",
          "status": "completed",
          "completedAt": "2025-01-12T12:45:00Z",
          "notes": "Created category.validation.js with CategorySchema and UpdateCategorySchema. Simple schema with name field (2-50 chars).",
          "dependencies": ["phase-3"]
        },
        {
          "id": "4.6",
          "name": "SubCategorySchema",
          "description": "Zod schema for subcategory",
          "status": "completed",
          "completedAt": "2025-01-12T13:00:00Z",
          "notes": "Created subcategory.validation.js with SubCategorySchema and UpdateSubCategorySchema. Includes name and categoryId validation.",
          "dependencies": ["4.5"]
        },
        {
          "id": "4.7",
          "name": "BrandSchema",
          "description": "Zod schema for brand",
          "status": "completed",
          "completedAt": "2025-01-12T13:15:00Z",
          "notes": "Created brand.validation.js with BrandSchema and UpdateBrandSchema. Simple schema with name field (2-50 chars).",
          "dependencies": ["phase-3"]
        },
        {
          "id": "4.8",
          "name": "SupplierSchema",
          "description": "Zod schema for supplier",
          "status": "completed",
          "completedAt": "2025-01-12T13:30:00Z",
          "notes": "Created supplier.validation.js with SupplierSchema and UpdateSupplierSchema. Includes name (2-100 chars), phone (regex validated), and notes (max 500 chars).",
          "dependencies": ["phase-3"]
        },
        {
          "id": "4.9",
          "name": "LoginSchema",
          "description": "Zod schema for login",
          "status": "completed",
          "completedAt": "2025-01-12T13:45:00Z",
          "notes": "Created auth.validation.js with LoginSchema. Validates email (valid format) and password (min 6 chars).",
          "dependencies": ["phase-3"]
        },
        {
          "id": "4.10",
          "name": "Common Error Handler",
          "description": "Error formatting utility for Zod and service errors",
          "status": "completed",
          "completedAt": "2025-01-12T14:00:00Z",
          "notes": "Created errorFormatter.js with formatValidationError function. Converts ZodError to structured error format with French messages and details array. Matches errorFactory format.",
          "dependencies": ["4.1", "4.2", "4.3", "4.4"]
        }
      ]
    },
    {
      "id": "phase-5",
      "name": "API Construction",
      "description": "Build all API endpoints with authentication, validation, and service integration",
      "status": "completed",
      "progress": 100,
      "startDate": "2025-01-12T15:00:00Z",
      "endDate": "2025-01-12T23:59:59Z",
      "why": "API endpoints are the interface between frontend and backend. They handle HTTP concerns (request/response, validation, authorization) and delegate business logic to services. Building them after services ensures clean separation of concerns.",
      "how": "Create Next.js API routes for all endpoints. Each route handles authentication (requireUser, requireManager, requireCashier), validation (Zod schemas), calls appropriate service, and returns standardized JSON responses with French error messages.",
      "tasks": [
        {
          "id": "5.1",
          "name": "POST /api/products",
          "description": "Create product endpoint with manager authentication",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.1", "4.1", "phase-6"]
        },
        {
          "id": "5.2",
          "name": "GET /api/products",
          "description": "Get products with filters, pagination, sorting",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.4", "phase-6"]
        },
        {
          "id": "5.3",
          "name": "GET /api/products/[id]",
          "description": "Get single product by ID",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.5", "phase-6"]
        },
        {
          "id": "5.4",
          "name": "PATCH /api/products/[id]",
          "description": "Update product endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.2", "4.2", "phase-6"]
        },
        {
          "id": "5.5",
          "name": "DELETE /api/products/[id]",
          "description": "Delete product endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.8", "phase-6"]
        },
        {
          "id": "5.6",
          "name": "GET /api/products/search",
          "description": "Search products endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.6", "phase-6"]
        },
        {
          "id": "5.7",
          "name": "POST /api/sales",
          "description": "Register sale endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.9", "4.3", "phase-6"]
        },
        {
          "id": "5.8",
          "name": "GET /api/sales",
          "description": "Get sales with filters",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.10", "phase-6"]
        },
        {
          "id": "5.9",
          "name": "GET /api/sales/my-sales",
          "description": "Get cashier's sales",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.11", "phase-6"]
        },
        {
          "id": "5.10",
          "name": "POST /api/inventory-in",
          "description": "Add inventory entry endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.12", "4.4", "phase-6"]
        },
        {
          "id": "5.11",
          "name": "GET /api/inventory-in",
          "description": "Get inventory history endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.13", "phase-6"]
        },
        {
          "id": "5.12",
          "name": "POST /api/categories",
          "description": "Create category endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.14", "4.5", "phase-6"]
        },
        {
          "id": "5.13",
          "name": "GET /api/categories",
          "description": "Get categories endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.14", "phase-6"]
        },
        {
          "id": "5.14",
          "name": "PATCH /api/categories/[id]",
          "description": "Update category endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.14", "phase-6"]
        },
        {
          "id": "5.15",
          "name": "DELETE /api/categories/[id]",
          "description": "Delete category endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.14", "phase-6"]
        },
        {
          "id": "5.16",
          "name": "POST /api/subcategories",
          "description": "Create subcategory endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.15", "4.6", "phase-6"]
        },
        {
          "id": "5.17",
          "name": "GET /api/subcategories",
          "description": "Get subcategories endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.15", "phase-6"]
        },
        {
          "id": "5.18",
          "name": "PATCH /api/subcategories/[id]",
          "description": "Update subcategory endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.15", "phase-6"]
        },
        {
          "id": "5.19",
          "name": "DELETE /api/subcategories/[id]",
          "description": "Delete subcategory endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.15", "phase-6"]
        },
        {
          "id": "5.20",
          "name": "POST /api/brands",
          "description": "Create brand endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.16", "4.7", "phase-6"]
        },
        {
          "id": "5.21",
          "name": "GET /api/brands",
          "description": "Get brands endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.16", "phase-6"]
        },
        {
          "id": "5.22",
          "name": "PATCH /api/brands/[id]",
          "description": "Update brand endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.16", "phase-6"]
        },
        {
          "id": "5.23",
          "name": "DELETE /api/brands/[id]",
          "description": "Delete brand endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.16", "phase-6"]
        },
        {
          "id": "5.24",
          "name": "POST /api/suppliers",
          "description": "Create supplier endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.17", "4.8", "phase-6"]
        },
        {
          "id": "5.25",
          "name": "GET /api/suppliers",
          "description": "Get suppliers endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.17", "phase-6"]
        },
        {
          "id": "5.26",
          "name": "PATCH /api/suppliers/[id]",
          "description": "Update supplier endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.17", "phase-6"]
        },
        {
          "id": "5.27",
          "name": "DELETE /api/suppliers/[id]",
          "description": "Delete supplier endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.17", "phase-6"]
        },
        {
          "id": "5.28",
          "name": "POST /api/auth/login",
          "description": "Login endpoint with JWT and cookie",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.18", "4.9"]
        },
        {
          "id": "5.29",
          "name": "POST /api/auth/logout",
          "description": "Logout endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.21", "phase-6"]
        },
        {
          "id": "5.30",
          "name": "GET /api/auth/session",
          "description": "Get current session endpoint",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.20", "phase-6"]
        }
      ]
    },
    {
      "id": "phase-6",
      "name": "Authentication & Authorization",
      "description": "Implement authentication middleware and authorization checks",
      "status": "pending",
      "progress": 0,
      "startDate": null,
      "endDate": null,
      "why": "Security is critical. Authentication ensures users are who they claim to be, and authorization ensures they can only access resources they're permitted to. This must be implemented before building APIs that require protection.",
      "how": "Create middleware functions (requireUser, requireManager, requireCashier) that verify JWT tokens from cookies, check user roles, and attach user data to requests. These are used by API routes to protect endpoints.",
      "tasks": [
        {
          "id": "6.1",
          "name": "requireUser",
          "description": "Middleware to check authentication",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.20"]
        },
        {
          "id": "6.2",
          "name": "requireManager",
          "description": "Middleware to check manager role",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["6.1"]
        },
        {
          "id": "6.3",
          "name": "requireCashier",
          "description": "Middleware to check cashier or manager role",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["6.1"]
        },
        {
          "id": "6.4",
          "name": "getSession",
          "description": "Utility to extract and verify JWT token",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["3.20"]
        }
      ]
    },
    {
      "id": "phase-7",
      "name": "Manager Dashboard",
      "description": "Build complete manager interface with all management pages",
      "status": "pending",
      "progress": 0,
      "startDate": null,
      "endDate": null,
      "why": "The manager dashboard is the primary interface for store management. It provides full control over products, inventory, sales, categories, and analytics. This is where managers spend most of their time.",
      "how": "Build Next.js pages using styled-components. Create layout with sidebar navigation and top bar. Build pages for dashboard analytics, products management, inventory, categories, brands, suppliers, sales records, and alerts. All UI text in French.",
      "tasks": [
        {
          "id": "7.1",
          "name": "Dashboard Layout",
          "description": "Create layout with sidebar and top bar",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["phase-5"]
        },
        {
          "id": "7.2",
          "name": "Dashboard Analytics Page",
          "description": "Statistics cards, charts, recent sales and inventory",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "phase-5"]
        },
        {
          "id": "7.3",
          "name": "Products List Page",
          "description": "Table with search, filters, pagination, sorting",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "5.2", "5.6"]
        },
        {
          "id": "7.4",
          "name": "Add Product Page",
          "description": "Form with all product fields and validation",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "5.1"]
        },
        {
          "id": "7.5",
          "name": "Edit Product Page",
          "description": "Pre-filled form with update and delete functionality",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "5.3", "5.4", "5.5"]
        },
        {
          "id": "7.6",
          "name": "Inventory-In Page",
          "description": "Supply form and inventory history list",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "5.10", "5.11"]
        },
        {
          "id": "7.7",
          "name": "Categories Management Page",
          "description": "Categories list with CRUD operations",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "5.12", "5.13", "5.14", "5.15"]
        },
        {
          "id": "7.8",
          "name": "SubCategories Management Page",
          "description": "SubCategories list with CRUD operations",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "5.16", "5.17", "5.18", "5.19"]
        },
        {
          "id": "7.9",
          "name": "Brands Management Page",
          "description": "Brands list with CRUD operations",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "5.20", "5.21", "5.22", "5.23"]
        },
        {
          "id": "7.10",
          "name": "Suppliers Management Page",
          "description": "Suppliers list with CRUD operations",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "5.24", "5.25", "5.26", "5.27"]
        },
        {
          "id": "7.11",
          "name": "Sales Records Page",
          "description": "All sales table with filters and pagination",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "5.8"]
        },
        {
          "id": "7.12",
          "name": "Alerts Page",
          "description": "Low stock products list and notifications",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1", "3.7"]
        },
        {
          "id": "7.13",
          "name": "UI Components - ProductCard, SaleRow",
          "description": "Create reusable UI components",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1"]
        },
        {
          "id": "7.14",
          "name": "UI Components - InventoryLogRow, FormInput",
          "description": "Create reusable UI components",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1"]
        },
        {
          "id": "7.15",
          "name": "UI Components - Button, Modal",
          "description": "Create reusable UI components",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["7.1"]
        }
      ]
    },
    {
      "id": "phase-8",
      "name": "Cashier Panel",
      "description": "Build fast-selling interface for cashiers",
      "status": "pending",
      "progress": 0,
      "startDate": null,
      "endDate": null,
      "why": "Cashiers need a fast, simple interface focused on selling. They don't need full management capabilities, just the ability to search products, enter sales, and view their recent sales. Speed and simplicity are key.",
      "how": "Build minimal layout with navigation. Create fast-selling page with real-time search, product selection, quantity/price input, and sell button. Create recent sales page showing only cashier's sales. All UI text in French.",
      "tasks": [
        {
          "id": "8.1",
          "name": "Cashier Layout",
          "description": "Simple layout with navigation",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["phase-5"]
        },
        {
          "id": "8.2",
          "name": "Fast Selling Page",
          "description": "Search bar, product selection, quantity/price input, sell button",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["8.1", "5.6", "5.7"]
        },
        {
          "id": "8.3",
          "name": "Recent Sales Page",
          "description": "List of cashier's recent sales only",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["8.1", "5.9"]
        },
        {
          "id": "8.4",
          "name": "Error Handling UI",
          "description": "Error and success message display, loading states",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["8.2", "8.3"]
        }
      ]
    },
    {
      "id": "phase-9",
      "name": "Testing",
      "description": "Unit tests, integration tests, and end-to-end tests",
      "status": "pending",
      "progress": 0,
      "startDate": null,
      "endDate": null,
      "why": "Testing ensures code quality, catches bugs early, and provides confidence when making changes. Unit tests verify individual components work correctly, integration tests verify components work together, and E2E tests verify complete user flows.",
      "how": "Setup Jest and Supertest. Write unit tests for all services, integration tests for all API endpoints, authorization tests, and end-to-end tests for critical user flows. Run tests before deployment.",
      "tasks": [
        {
          "id": "9.1",
          "name": "Setup Testing Framework",
          "description": "Install Jest, Supertest, configure for Next.js",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["phase-5"]
        },
        {
          "id": "9.2",
          "name": "Unit Tests - ProductService",
          "description": "Test all ProductService methods",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["9.1", "phase-3"]
        },
        {
          "id": "9.3",
          "name": "Unit Tests - SaleService",
          "description": "Test all SaleService methods including transactions",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["9.1", "phase-3"]
        },
        {
          "id": "9.4",
          "name": "Unit Tests - InventoryService",
          "description": "Test all InventoryService methods",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["9.1", "phase-3"]
        },
        {
          "id": "9.5",
          "name": "Unit Tests - AuthService",
          "description": "Test login, verifyPassword, getUserFromSession",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["9.1", "phase-3"]
        },
        {
          "id": "9.6",
          "name": "Integration Tests - Products API",
          "description": "Test all product API endpoints",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["9.1", "phase-5"]
        },
        {
          "id": "9.7",
          "name": "Integration Tests - Sales API",
          "description": "Test all sales API endpoints",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["9.1", "phase-5"]
        },
        {
          "id": "9.8",
          "name": "Integration Tests - Auth API",
          "description": "Test login, logout, session endpoints",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["9.1", "phase-5"]
        },
        {
          "id": "9.9",
          "name": "Authorization Tests",
          "description": "Test requireManager, requireCashier, requireUser",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["9.1", "phase-6"]
        },
        {
          "id": "9.10",
          "name": "End-to-End Tests",
          "description": "Test complete sale flow, inventory supply flow, product creation flow",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["9.1", "phase-5", "phase-7", "phase-8"]
        }
      ]
    },
    {
      "id": "phase-10",
      "name": "Deployment",
      "description": "Deploy to production and finalize project",
      "status": "pending",
      "progress": 0,
      "startDate": null,
      "endDate": null,
      "why": "Deployment makes the system accessible to end users. Production deployment requires careful configuration of environment variables, database connections, and thorough testing to ensure everything works in the live environment.",
      "how": "Setup Vercel account, connect GitHub repository, configure build settings, set environment variables (MONGODB_URI, JWT_SECRET, etc.), create production MongoDB Atlas cluster, test all functionality on production, and provide handover documentation.",
      "tasks": [
        {
          "id": "10.1",
          "name": "Setup Vercel",
          "description": "Create account, connect repository, configure build",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["phase-7", "phase-8"]
        },
        {
          "id": "10.2",
          "name": "Environment Variables",
          "description": "Set MONGODB_URI, JWT_SECRET, SESSION_KEY, NODE_ENV in Vercel",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["10.1"]
        },
        {
          "id": "10.3",
          "name": "MongoDB Atlas Production",
          "description": "Create production cluster, configure connection, test",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["10.1"]
        },
        {
          "id": "10.4",
          "name": "Final Testing",
          "description": "Test all endpoints, authentication, operations on production",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["10.2", "10.3"]
        },
        {
          "id": "10.5",
          "name": "Handover",
          "description": "Document deployment, provide credentials, train store owner",
          "status": "pending",
          "completedAt": null,
          "notes": "",
          "dependencies": ["10.4"]
        }
      ]
    }
  ],
  "currentPhase": "phase-6",
  "statistics": {
    "totalPhases": 10,
    "totalTasks": 114,
    "completedPhases": 5,
    "completedTasks": 76,
    "inProgressPhases": 0,
    "inProgressTasks": 0,
    "pendingPhases": 5,
    "pendingTasks": 38,
    "overallProgress": 66.67
  },
  "notes": {
    "general": "All UI text must be in French. All technical documentation, code, and comments must be in English.",
    "statusDefinitions": {
      "pending": "Task/Phase not started yet",
      "in_progress": "Task/Phase currently being worked on",
      "completed": "Task/Phase finished and verified",
      "blocked": "Task/Phase cannot proceed due to dependencies or issues"
    }
  }
}
